/*1]

STUDY01 에 아래와 같은 평가 테이블을 생성 하세요.
테이블 명 : TEVAL 
컬럼 
  1. 평가년월 (YM_EV VARCHAR2(06) )  NOT NULL
  2. 피평가자( EMP_ID NUMBER)    NOT NULL   
  3. 평가코드(EV_CD  VARCHAR2(04))    NOT NULL
  4. 평가 등급 (EV_RES VARCHAR2(01))
  5. 평가자 (EV_EMP NUMBER)
 TABLE LEVEL 제약조건
  1. PRIMARY KEY (TEVAL_PK) : 평가년월, 피평가자, 평가코드 순서의 복합 PK
  2. FORIGN KEY(TVEAL_FK_EMP) : 피평가자 부모키 = TEMP 의 EMP_ID
  3. CHECK (TEVAL_EVEMP_CHK) : 평가 등급이 A,B,C,D,F 중 하나인지 CHECK */



  CREATE TABLE TEVAL002
    (YM_EV VARCHAR2(06) NOT NULL,
     EMP_ID NUMBER NOT NULL,
     EV_CD VARCHAR2(04) NOT NULL,
     EV_RES VARCHAR2(01),
     EV_EMP NUMBER,
     CONSTRAINT TEVAL002_PK PRIMARY KEY (YM_EV, EMP_ID, EV_CD),
     CONSTRAINT TEVAL002_FK FOREIGN KEY (EMP_ID) REFERENCES TEMP(EMP_ID),
     CONSTRAINT TEVAL_EVEMP_CHK_CK CHECK (EV_RES IN('A','B','C','D','F')));

/*2]

STUDY01 에 아래와 같은 코드 테이블을 생성 하세요.
테이블 명 : TMCD 
컬럼 
  1. 메인코드 (MAIN_CD VARCHAR2(04)
  2. 코드명  ( MAIN_NM VARCHAR2(20) 
  3. 코드설명 (CODE_DES VARCHAR2(4000)
컬럼 LEVEL 제약조건
  1. PRIMARY KEY : 메인코드
  2. NOT NULL 컬럼 메인코드 코드명*/

  CREATE TABLE TMCD001 (
      MAIN_CD   VARCHAR2(04) NOT NULL,
      MAIN_MM   VARCHAR2(20),
      CODE_DES  VARCHAR2(4000),
      CONSTRAINT MAIN_CD_PK PRIMARY KEY (MAIN_CD
      ));
    

/*3]

1. STUDY01 에 아래와 같은 코드 테이블을 생성  및 생성여부 확인
테이블 명 : TCODE 
컬럼 
  1. 메인코드 (MAIN_CD VARCHAR2(04) )  NOT NULL
  2. 코드값 (CODE_CD VARCHAR2(04) ) NOT NULL
  3. 코드명  ( CODE_NM VARCHAR2(20) 
  4. 코드설명 (CODE_DES VARCHAR2(4000)*/

  CREATE TABLE TCODE001 (
    MAIN_CD VARCHAR2(04) NOT NULL,
    CODE_CD VARCHAR2(04) NOT NULL,
    CODE_MM VARCHAR2(20),
    CODE_DES VARCHAR2(4000)
);
/*2. ALTER 명령으로 TCODE 테이블의 MAIN_CD,CODE_CD PRIMARY KEY 추가 
   ( CONSTRAINT명 : TCODE_PK ) 및 추가여부확인*/

   ALTER TABLE TCODE001
ADD CONSTRAINT TCODE001_PK PRIMARY KEY(MAIN_CD,CODE_CD);

SELECT * FROM ALL_CONSTRAINTS
WHERE TABLE_NAME = 'TCODE001';


/*3. ALTER 명령으로 TCODE 테이블의 CODE_CD NULL 허용  => 에러 확인*/
ALTER TABLE TCODE001
MODIFY CODE_CD NULL;


/*4. ALTER 명령으로 TCODE 테이블의 PRIMARY KEY 삭제 후 삭제여부 확인*/

ALTER TABLE TCODE001
DROP CONSTRAINT TCODE001_PK;

SELECT * FROM ALL_CONSTRAINTS
WHERE TABLE_NAME = 'TCODE001';

/*5. ALTER 명령으로 TCODE 테이블의 MAIN_CD,CODE_CD UNIQUE  제약 조건 추가 
   ( CONSTRAINT명 : TCODE_UK ) 및 추가여부확인*/

ALTER TABLE TCODE001
ADD CONSTRAINT TCODE001_UK UNIQUE (MAIN_CD,CODE_CD);

/*6. ALTER 명령으로 TCODE 의 UNIQUE 제약 비활성화 후 확인*/

ALTER TABLE TCODE001
DISABLE CONSTRAINT TCODE001_UK;



/*7. ALTER 명령으로 TCODE 의 UNIQUE 제약 활성화 후 확인*/

ALTER TABLE TCODE001
ENABLE CONSTRAINT TCODE001_UK;


